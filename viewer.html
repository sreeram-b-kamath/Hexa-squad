<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viewer-Dashboard</title>
    <link rel="stylesheet" href="viewer.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">


</head>
<body class="body-class">
  <div class="d-flex row justify-items-between m-5 gap-3">

    <div class="d-flex column justify-items-center align-items-center p-3">
      <div style="width: 800px; height: 400px;" id="wt-container"></div>
    </div>

    <div class="d-flex column justify-items-center align-items-center p-3">
      <form class="form" id="viewer-form" class="">
        <input class="form-control" type="text" id="username" placeholder="Username" required><br>
        <input class="form-control" type="text" id="predict-name" placeholder="Predict Name" required><br>
        <button class="btn btn-warning text-white" type="submit" onclick="checkGuess()">Submit</button>
      </form>
    </div>
    
  </div>

    

      
      
      
    
</body>

<script src="https://www.whiteboard.team/dist/api.js"></script>
    <script type="text/javascript">
        var wt = new api.WhiteboardTeam('#wt-container', {
            clientId: '51a4013c35cc0835339357ada81f1458',
            boardCode: '61249e0-feca-4acb-8483-66cf47dad409-pz3r0',
            participant: {
                role : 'viewer',
                name : 'Hari' //change this username with respect to login.
            },
            board: {
                tool: 'pen',

            }
        });
</script>


<!-- Firebase Configurations-->

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
<script>
    const firebaseConfig = {
    apiKey: "AIzaSyDSPmxx3T3NydlQlFwA5lfctSR-7vEonv8",
    authDomain: "hexa-squad.firebaseapp.com",
    databaseURL: "https://hexa-squad-default-rtdb.firebaseio.com",
    projectId: "hexa-squad",
    storageBucket: "hexa-squad.appspot.com",
    messagingSenderId: "550225963727",
    appId: "1:550225963727:web:81fa3b4bb3feae38d425ba",
    measurementId: "G-LZXR9GNSH7"
  };
   firebase.initializeApp(firebaseConfig);
</script>

<script>
    const database = firebase.database();
  
    document.getElementById('viewer-form').addEventListener('submit', async (e) => {
      e.preventDefault();
  
      const username = document.getElementById('username').value; // username local storage ninn kittanam..
      //

      // const name = localStorageil ninn edukkunnath

      //
      const predictName = document.getElementById('predict-name').value;
  
      try {
        await database.ref('viewer-guesses').push({
          username: username,
          predictName: predictName,
        });
        
        console.log('Data added successfully!');

        //Form reset cheyyanulla code add cheyynm..

        document.getElementById('viewer-form').reset();
      } catch (error) {
        console.error('Error adding document: ', error);
      }
    });


  </script>

  <!--Retrieving the drawer question and ready for guess-->
  <script>
    let drawerQuestionRef = database.ref('/drawer-question') 
    console.log("Full question object")
    console.log(drawerQuestionRef)

    drawerQuestionRef.once('value',function(snapshot){
      var data = snapshot.val()
      console.log("data::::")
      console.log(data)
    })
  </script>
  <!-- Retrieving the drawer question-->
  
  
  

</html>